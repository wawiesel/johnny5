<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Johnny5 Web Viewer</title>
    <link rel="stylesheet" href="/static/app.css">
    <link rel="stylesheet" href="/static/debug.css">
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>

<body class="debug-colors">
    <div id="app">
        <div class="app-container">
            <!-- PDF COLUMN (nested grid) -->
            <div id="pdf-col">
                <div id="pdf-indicator" class="box">i</div>
                <div id="pdf-x-density" class="box dark-text">
                    <canvas id="x-density-chart"></canvas>
                </div>
                <div id="pdf-y-density" class="box">
                    <!-- Canvases will be created dynamically -->
                </div>
                <div id="pdf-viewer" class="box dark-text">
                    <div class="pdf-controls-overlay">
                        <button id="zoom-out" class="control-btn" title="Zoom Out">
                            <svg class="control-icon" viewBox="0 0 24 24">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                                <line x1="8" y1="11" x2="14" y2="11"></line>
                            </svg>
                        </button>
                        <span id="zoom-level" class="zoom-display">100%</span>
                        <button id="zoom-in" class="control-btn" title="Zoom In">
                            <svg class="control-icon" viewBox="0 0 24 24">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                                <line x1="11" y1="8" x2="11" y2="14"></line>
                                <line x1="8" y1="11" x2="14" y2="11"></line>
                            </svg>
                        </button>
                        <button id="fit-width" class="control-btn" title="Fit Width">
                            <svg class="control-icon" viewBox="0 0 24 24">
                                <path d="M3 12h18"></path>
                                <path d="M3 6h18"></path>
                                <path d="M3 18h18"></path>
                            </svg>
                        </button>
                        <button id="fit-height" class="control-btn" title="Fit Height">
                            <svg class="control-icon" viewBox="0 0 24 24">
                                <path d="M12 3v18"></path>
                                <path d="M6 3v18"></path>
                                <path d="M18 3v18"></path>
                            </svg>
                        </button>
                    </div>

                    <div id="page-count-overlay" class="box">1 / --</div>

                    <div id="pdf-scroller">
                        <div class="pdf-canvas-container" id="pdf-canvas-container">
                            <canvas id="pdf-canvas"></canvas>
                        </div>
                        <div class="overlay-container" id="overlay-container">
                            <!-- Annotations will be rendered here -->
                        </div>
                    </div>
                </div>
                <div id="pdf-options" class="box" style="position: relative;">
                <input type="checkbox" id="pdf-options-cb" class="options-cb" style="display:none;">
                <label for="pdf-options-cb" id="pdf-options-toggle" class="options-toggle" title="Collapse/expand">▼</label>
                <div class="pdf-controls">
                    <div class="pdf-control-group">
                            <label>PDF:</label>
                            <input type="file" id="pdf-file-input" accept=".pdf" style="display: none;">
                            <button id="load-pdf-btn" class="control-btn">Load PDF</button>
                            <span id="current-file-name" class="file-display">No file</span>
                        </div>
                    </div>
                </div>
                <div id="pdf-log" class="box dark-text" style="position: relative;">
                    <div class="pdf-log-scroll-container">
                        <div class="pdf-log-content" id="left-log-content">
                            <div class="pdf-log-entry">Waiting for dissassembly logs 1...</div>
                            <div class="pdf-log-entry">Waiting for dissassembly logs 2...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ANNOTATIONS COLUMN -->
            <div id="ann-col">
                <div id="ann-progress" class="box dark-text">P</div>
                <div id="ann-list" class="box dark-text">
                    <div class="annotation-list" id="annotation-list">
                        <!-- Dynamically generated annotations will appear here -->
                    </div>
                </div>
                <div id="ann-toggles" class="box" style="position: relative;">
                    <div class="ann-toggles-resize-handle" title="Drag to resize"></div>
                    <div class="label-toggles-container">
                        <div class="label-toggles-toolbar">
                            <button id="select-all-labels" class="control-btn" title="Select all labels">Select All</button>
                            <button id="deselect-all-labels" class="control-btn" title="Deselect all labels">Deselect All</button>
                        </div>
                        <div id="label-checkboxes" class="label-checkboxes">
                            <!-- Dynamically generated checkboxes will appear here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- RECONSTRUCTION COLUMN -->
            <div id="rec-col">
                <div id="rec-x-density" class="box dark-text">
                    <canvas id="x-density-right-chart"></canvas>
                </div>
                <div id="rec-indicator" class="box">r</div>
                <div id="rec-viewer" class="box dark-text">
                    <div class="not-implemented">Reconstructed Content</div>
                </div>
                <div id="rec-y-density" class="box dark-text">
                    <!-- Canvases will be created dynamically -->
                </div>
                <div id="rec-options" class="box" style="position: relative;">
                    <input type="checkbox" id="rec-options-cb" class="options-cb" style="display:none;">
                    <label for="rec-options-cb" id="rec-options-toggle" class="options-toggle" title="Collapse/expand">▼</label>
                    <div class="rec-controls">
                        <div class="rec-control-group">Prototype: line 1 of filler text.</div>
                        <div class="rec-control-group">Prototype: line 2 of filler text.</div>
                        <div class="rec-control-group">Prototype: line 3 of filler text.</div>
                    </div>
                </div>
                <div id="rec-log" class="box dark-text" style="position: relative;">
                    <div class="rec-log-content" id="right-log-content">
                        <div class="rec-log-entry">Waiting for reconstruct logs 1...</div>
                        <div class="rec-log-entry">Waiting for reconstruct logs 2...</div>
                </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <script src="/static/density-charts.js"></script> -->
    <script src="/static/app.js"></script>
    <script src="/static/resize.js"></script>
</body>

</html>